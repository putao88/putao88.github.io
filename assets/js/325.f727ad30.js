(window.webpackJsonp=window.webpackJsonp||[]).push([[325],{687:function(e,a,n){"use strict";n.r(a);var t=n(25),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"buffers"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#buffers"}},[e._v("#")]),e._v(" Buffers")]),e._v(" "),n("p",[e._v("NAN's "),n("code",[e._v("node::Buffer")]),e._v(" helpers exist as the API has changed across supported Node versions. Use these methods to ensure compatibility.")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#api_nan_new_buffer"}},[n("b",[n("code",[e._v("Nan::NewBuffer()")])])])]),e._v(" "),n("li",[n("a",{attrs:{href:"#api_nan_copy_buffer"}},[n("b",[n("code",[e._v("Nan::CopyBuffer()")])])])]),e._v(" "),n("li",[n("a",{attrs:{href:"#api_nan_free_callback"}},[n("b",[n("code",[e._v("Nan::FreeCallback()")])])])])]),e._v(" "),n("p",[n("a",{attrs:{name:"api_nan_new_buffer"}})]),e._v(" "),n("h3",{attrs:{id:"nan-newbuffer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nan-newbuffer"}},[e._v("#")]),e._v(" Nan::NewBuffer()")]),e._v(" "),n("p",[e._v("Allocate a new "),n("code",[e._v("node::Buffer")]),e._v(" object with the specified size and optional data. Calls "),n("code",[e._v("node::Buffer::New()")]),e._v(".")]),e._v(" "),n("p",[e._v("Note that when creating a "),n("code",[e._v("Buffer")]),e._v(" using "),n("code",[e._v("Nan::NewBuffer()")]),e._v(" and an existing "),n("code",[e._v("char*")]),e._v(", it is assumed that the ownership of the pointer is being transferred to the new "),n("code",[e._v("Buffer")]),e._v(" for management.\nWhen a "),n("code",[e._v("node::Buffer")]),e._v(" instance is garbage collected and a "),n("code",[e._v("FreeCallback")]),e._v(" has not been specified, "),n("code",[e._v("data")]),e._v(" will be disposed of via a call to "),n("code",[e._v("free()")]),e._v(".\nYou "),n("em",[e._v("must not")]),e._v(" free the memory space manually once you have created a "),n("code",[e._v("Buffer")]),e._v(" in this way.")]),e._v(" "),n("p",[e._v("Signature:")]),e._v(" "),n("div",{staticClass:"language-c++ line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Nan::MaybeLocal<v8::Object> Nan::NewBuffer(uint32_t size)\nNan::MaybeLocal<v8::Object> Nan::NewBuffer(char* data, uint32_t size)\nNan::MaybeLocal<v8::Object> Nan::NewBuffer(char *data,\n                                           size_t length,\n                                           Nan::FreeCallback callback,\n                                           void *hint)\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("p",[n("a",{attrs:{name:"api_nan_copy_buffer"}})]),e._v(" "),n("h3",{attrs:{id:"nan-copybuffer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nan-copybuffer"}},[e._v("#")]),e._v(" Nan::CopyBuffer()")]),e._v(" "),n("p",[e._v("Similar to "),n("a",{attrs:{href:"#api_nan_new_buffer"}},[n("code",[e._v("Nan::NewBuffer()")])]),e._v(" except that an implicit memcpy will occur within Node. Calls "),n("code",[e._v("node::Buffer::Copy()")]),e._v(".")]),e._v(" "),n("p",[e._v("Management of the "),n("code",[e._v("char*")]),e._v(" is left to the user, you should manually free the memory space if necessary as the new "),n("code",[e._v("Buffer")]),e._v(" will have its own copy.")]),e._v(" "),n("p",[e._v("Signature:")]),e._v(" "),n("div",{staticClass:"language-c++ line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Nan::MaybeLocal<v8::Object> Nan::CopyBuffer(const char *data, uint32_t size)\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[n("a",{attrs:{name:"api_nan_free_callback"}})]),e._v(" "),n("h3",{attrs:{id:"nan-freecallback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nan-freecallback"}},[e._v("#")]),e._v(" Nan::FreeCallback()")]),e._v(" "),n("p",[e._v("A free callback that can be provided to "),n("a",{attrs:{href:"#api_nan_new_buffer"}},[n("code",[e._v("Nan::NewBuffer()")])]),e._v(".\nThe supplied callback will be invoked when the "),n("code",[e._v("Buffer")]),e._v(" undergoes garbage collection.")]),e._v(" "),n("p",[e._v("Signature:")]),e._v(" "),n("div",{staticClass:"language-c++ line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("typedef void (*FreeCallback)(char *data, void *hint);\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);