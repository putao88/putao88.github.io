(window.webpackJsonp=window.webpackJsonp||[]).push([[339],{700:function(a,e,t){"use strict";t.r(e);var n=t(25),s=Object(n.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"v8-internals"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#v8-internals"}},[a._v("#")]),a._v(" V8 internals")]),a._v(" "),t("p",[a._v("The hooks to access V8 internals—including GC and statistics—are different across the supported versions of V8, therefore NAN provides its own hooks that call the appropriate V8 methods.")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#api_nan_gc_callback"}},[t("b",[t("code",[a._v("NAN_GC_CALLBACK()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_add_gc_epilogue_callback"}},[t("b",[t("code",[a._v("Nan::AddGCEpilogueCallback()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_remove_gc_epilogue_callback"}},[t("b",[t("code",[a._v("Nan::RemoveGCEpilogueCallback()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_add_gc_prologue_callback"}},[t("b",[t("code",[a._v("Nan::AddGCPrologueCallback()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_remove_gc_prologue_callback"}},[t("b",[t("code",[a._v("Nan::RemoveGCPrologueCallback()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_get_heap_statistics"}},[t("b",[t("code",[a._v("Nan::GetHeapStatistics()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_set_counter_function"}},[t("b",[t("code",[a._v("Nan::SetCounterFunction()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_set_create_histogram_function"}},[t("b",[t("code",[a._v("Nan::SetCreateHistogramFunction()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_set_add_histogram_sample_function"}},[t("b",[t("code",[a._v("Nan::SetAddHistogramSampleFunction()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_idle_notification"}},[t("b",[t("code",[a._v("Nan::IdleNotification()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_low_memory_notification"}},[t("b",[t("code",[a._v("Nan::LowMemoryNotification()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_context_disposed_notification"}},[t("b",[t("code",[a._v("Nan::ContextDisposedNotification()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_get_internal_field_pointer"}},[t("b",[t("code",[a._v("Nan::GetInternalFieldPointer()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_set_internal_field_pointer"}},[t("b",[t("code",[a._v("Nan::SetInternalFieldPointer()")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#api_nan_adjust_external_memory"}},[t("b",[t("code",[a._v("Nan::AdjustExternalMemory()")])])])])]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_gc_callback"}})]),a._v(" "),t("h3",{attrs:{id:"nan-gc-callback-callbackname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-gc-callback-callbackname"}},[a._v("#")]),a._v(" NAN_GC_CALLBACK(callbackname)")]),a._v(" "),t("p",[a._v("Use "),t("code",[a._v("NAN_GC_CALLBACK")]),a._v(" to declare your callbacks for "),t("code",[a._v("Nan::AddGCPrologueCallback()")]),a._v(" and "),t("code",[a._v("Nan::AddGCEpilogueCallback()")]),a._v(". Your new method receives the arguments "),t("code",[a._v("v8::GCType type")]),a._v(" and "),t("code",[a._v("v8::GCCallbackFlags flags")]),a._v(".")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('static Nan::Persistent<Function> callback;\n\nNAN_GC_CALLBACK(gcPrologueCallback) {\n  v8::Local<Value> argv[] = { Nan::New("prologue").ToLocalChecked() };\n  Nan::MakeCallback(Nan::GetCurrentContext()->Global(), Nan::New(callback), 1, argv);\n}\n\nNAN_METHOD(Hook) {\n  callback.Reset(To<Function>(args[0]).ToLocalChecked());\n  Nan::AddGCPrologueCallback(gcPrologueCallback);\n  info.GetReturnValue().Set(info.Holder());\n}\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("p",[t("a",{attrs:{name:"api_nan_add_gc_epilogue_callback"}})]),a._v(" "),t("h3",{attrs:{id:"nan-addgcepiloguecallback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-addgcepiloguecallback"}},[a._v("#")]),a._v(" Nan::AddGCEpilogueCallback()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::AddGCEpilogueCallback(v8::Isolate::GCEpilogueCallback callback, v8::GCType gc_type_filter = v8::kGCTypeAll)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#a580f976e4290cead62c2fc4dd396be3e",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("AddGCEpilogueCallback()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_remove_gc_epilogue_callback"}})]),a._v(" "),t("h3",{attrs:{id:"nan-removegcepiloguecallback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-removegcepiloguecallback"}},[a._v("#")]),a._v(" Nan::RemoveGCEpilogueCallback()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::RemoveGCEpilogueCallback(v8::Isolate::GCEpilogueCallback callback)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#adca9294555a3908e9f23c7bb0f0f284c",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("RemoveGCEpilogueCallback()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_add_gc_prologue_callback"}})]),a._v(" "),t("h3",{attrs:{id:"nan-addgcprologuecallback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-addgcprologuecallback"}},[a._v("#")]),a._v(" Nan::AddGCPrologueCallback()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::AddGCPrologueCallback(v8::Isolate::GCPrologueCallback, v8::GCType gc_type_filter callback)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#a6dbef303603ebdb03da6998794ea05b8",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("AddGCPrologueCallback()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_remove_gc_prologue_callback"}})]),a._v(" "),t("h3",{attrs:{id:"nan-removegcprologuecallback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-removegcprologuecallback"}},[a._v("#")]),a._v(" Nan::RemoveGCPrologueCallback()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::RemoveGCPrologueCallback(v8::Isolate::GCPrologueCallback callback)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#a5f72c7cda21415ce062bbe5c58abe09e",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("RemoveGCPrologueCallback()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_get_heap_statistics"}})]),a._v(" "),t("h3",{attrs:{id:"nan-getheapstatistics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-getheapstatistics"}},[a._v("#")]),a._v(" Nan::GetHeapStatistics()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::GetHeapStatistics(v8::HeapStatistics *heap_statistics)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#a5593ac74687b713095c38987e5950b34",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("GetHeapStatistics()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_set_counter_function"}})]),a._v(" "),t("h3",{attrs:{id:"nan-setcounterfunction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-setcounterfunction"}},[a._v("#")]),a._v(" Nan::SetCounterFunction()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::SetCounterFunction(v8::CounterLookupCallback cb)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#a045d7754e62fa0ec72ae6c259b29af94",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("SetCounterFunction()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_set_create_histogram_function"}})]),a._v(" "),t("h3",{attrs:{id:"nan-setcreatehistogramfunction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-setcreatehistogramfunction"}},[a._v("#")]),a._v(" Nan::SetCreateHistogramFunction()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::SetCreateHistogramFunction(v8::CreateHistogramCallback cb) \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#a542d67e85089cb3f92aadf032f99e732",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("SetCreateHistogramFunction()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_set_add_histogram_sample_function"}})]),a._v(" "),t("h3",{attrs:{id:"nan-setaddhistogramsamplefunction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-setaddhistogramsamplefunction"}},[a._v("#")]),a._v(" Nan::SetAddHistogramSampleFunction()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::SetAddHistogramSampleFunction(v8::AddHistogramSampleCallback cb) \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#aeb420b690bc2c216882d6fdd00ddd3ea",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("SetAddHistogramSampleFunction()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_idle_notification"}})]),a._v(" "),t("h3",{attrs:{id:"nan-idlenotification"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-idlenotification"}},[a._v("#")]),a._v(" Nan::IdleNotification()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("bool Nan::IdleNotification(int idle_time_in_ms)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#ad6a2a02657f5425ad460060652a5a118",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("IdleNotification()")]),a._v(" or "),t("code",[a._v("IdleNotificationDeadline()")]),t("OutboundLink")],1),a._v(" depending on V8 version.")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_low_memory_notification"}})]),a._v(" "),t("h3",{attrs:{id:"nan-lowmemorynotification"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-lowmemorynotification"}},[a._v("#")]),a._v(" Nan::LowMemoryNotification()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::LowMemoryNotification() \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#a24647f61d6b41f69668094bdcd6ea91f",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("LowMemoryNotification()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_context_disposed_notification"}})]),a._v(" "),t("h3",{attrs:{id:"nan-contextdisposednotification"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-contextdisposednotification"}},[a._v("#")]),a._v(" Nan::ContextDisposedNotification()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::ContextDisposedNotification()\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#ad7f5dc559866343fe6cd8db1f134d48b",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("ContextDisposedNotification()")]),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_get_internal_field_pointer"}})]),a._v(" "),t("h3",{attrs:{id:"nan-getinternalfieldpointer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-getinternalfieldpointer"}},[a._v("#")]),a._v(" Nan::GetInternalFieldPointer()")]),a._v(" "),t("p",[a._v("Gets a pointer to the internal field with at "),t("code",[a._v("index")]),a._v(" from a V8 "),t("code",[a._v("Object")]),a._v(" handle.")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void* Nan::GetInternalFieldPointer(v8::Local<v8::Object> object, int index) \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls the Object's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/db/d85/classv8_1_1_object.html#a580ea84afb26c005d6762eeb9e3c308f",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("GetAlignedPointerFromInternalField()")]),a._v(" or "),t("code",[a._v("GetPointerFromInternalField()")]),t("OutboundLink")],1),a._v(" depending on the version of V8.")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_set_internal_field_pointer"}})]),a._v(" "),t("h3",{attrs:{id:"nan-setinternalfieldpointer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-setinternalfieldpointer"}},[a._v("#")]),a._v(" Nan::SetInternalFieldPointer()")]),a._v(" "),t("p",[a._v("Sets the value of the internal field at "),t("code",[a._v("index")]),a._v(" on a V8 "),t("code",[a._v("Object")]),a._v(" handle.")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("void Nan::SetInternalFieldPointer(v8::Local<v8::Object> object, int index, void* value)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls the Object's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/db/d85/classv8_1_1_object.html#ab3c57184263cf29963ef0017bec82281",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("SetAlignedPointerInInternalField()")]),a._v(" or "),t("code",[a._v("SetPointerInInternalField()")]),t("OutboundLink")],1),a._v(" depending on the version of V8.")]),a._v(" "),t("p",[t("a",{attrs:{name:"api_nan_adjust_external_memory"}})]),a._v(" "),t("h3",{attrs:{id:"nan-adjustexternalmemory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nan-adjustexternalmemory"}},[a._v("#")]),a._v(" Nan::AdjustExternalMemory()")]),a._v(" "),t("p",[a._v("Signature:")]),a._v(" "),t("div",{staticClass:"language-c++ line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("int Nan::AdjustExternalMemory(int bytesChange)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Calls V8's "),t("a",{attrs:{href:"https://v8docs.nodesource.com/node-8.16/d5/dda/classv8_1_1_isolate.html#ae1a59cac60409d3922582c4af675473e",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("AdjustAmountOfExternalAllocatedMemory()")]),t("OutboundLink")],1),a._v(".")])])}),[],!1,null,null,null);e.default=s.exports}}]);